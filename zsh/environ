# vim: ft=zsh

export EDITOR=vim
export PAGER=less
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

# Enable Java anti-aliasing
export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=lcd'

PATH_DIRS=()

# Setup NodeJS NPM env vars
# NPM install global packages into user directory
#NPM_PACKAGES="$HOME/.npm-packages"
#if [[ -d "$NPM_PACKAGES" ]]; then
#    PATH_DIRS=("$NPM_PACKAGES/bin" $PATH_DIRS)
#    export NODE_PATH="$NPM_PACKAGES/lib/node_modules:$NODE_PATH"
#fi

# Setup ruby RVM env vars
RVM_DIR="$HOME/.rvm"
PATH_DIRS+=("$RVM_DIR/bin")

# Rust
PATH_DIRS+=("$HOME/.cargo/bin")

# Setup dir colors
if [[ -f "$HOME/.dircolors" ]]; then
    eval "$(dircolors -b $HOME/.dircolors)"
fi

if [[ "$PLATFORM" == 'macos' ]]; then

    PATH_DIRS=("/usr/local/bin" "/usr/local/sbin" $PATH_DIRS)

    if [[ -f /usr/libxexec/java_home ]]; then
        export JAVA_HOME=$(/usr/libexec/java_home)
    fi

elif [[ "$PLATFORM" == 'linux' ]]; then
    export LANGUAGE=en_US:en

    # Use system qemu
    export LIBVIRT_DEFAULT_URI="qemu:///system"

    PATH_DIRS+=("/opt/bin", "$HOME/usr/bin")
    PATH_DIRS+=("$HOME/.pyenv/bin")
fi

# Add PATH_DIRS to PATH
for dir in $PATH_DIRS; do
    if [[ -d "$dir" && "${PATH#*$dir}" == "$PATH" ]]; then
        PATH="$dir:$PATH"
    fi
done
export PATH

unset dir
unset PATH_DIRS

# PyEnv
if which pyenv > /dev/null; then
    eval "$(pyenv init -)"
fi
